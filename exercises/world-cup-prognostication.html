<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
<title>World Cup Prognostication &laquo;  Programming Praxis</title>
</head>
<body>
<div class="entrytitle">
<h2>World Cup&nbsp;Prognostication</h2>
<h3>June 29, 2010</h3>
</div>
<div class="entrybody">
<p><img src="http://programmingpraxis.files.wordpress.com/2010/06/worldcup.jpg?w=640" alt="Drawn by Kathryn Bewig" align="right" />On Saturday morning, inspired by Andrew Moylan&#8217;s <a onclick="return mugicPopWin(this,event);" oncontextmenu="mugicRightClick(this);" href="http://blog.wolfram.com/2010/06/24/simulating-the-world-cup-knockout-stage/">article</a> on Wolfram&#8217;s Blog, I sat down to work out a simulation of the knockout stage of the World Cup competition.  I used the bracket shown at right, and found elo <a href="http://en.wikipedia.org/wiki/World_Football_Elo_Ratings">ratings</a> of the sixteen teams, as of that morning, at Wikipedia:</p>
<p><code>&nbsp;1&nbsp;BRA&nbsp;Brazil&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2082<br />
&nbsp;2&nbsp;ESP&nbsp;Spain&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2061<br />
&nbsp;3&nbsp;NED&nbsp;Netherlands&nbsp;&nbsp;&nbsp;2045<br />
&nbsp;4&nbsp;ARG&nbsp;Argentina&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1966<br />
&nbsp;5&nbsp;ENG&nbsp;England&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1945<br />
&nbsp;6&nbsp;GER&nbsp;Germany&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1930<br />
&nbsp;7&nbsp;URU&nbsp;Uruguay&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1890<br />
&nbsp;8&nbsp;CHI&nbsp;Chile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1883<br />
&nbsp;9&nbsp;POR&nbsp;Portugal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1874<br />
10&nbsp;MEX&nbsp;Mexico&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1873<br />
15&nbsp;USA&nbsp;United&nbsp;States&nbsp;1785<br />
19&nbsp;PAR&nbsp;Paraguay&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1771<br />
25&nbsp;KOR&nbsp;Korea&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1746<br />
26&nbsp;JPN&nbsp;Japan&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1744<br />
32&nbsp;GHA&nbsp;Ghana&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1711<br />
45&nbsp;SVK&nbsp;Slovakia&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1654</code></p>
<p>The table shows that there are forty-four national teams with ratings higher than Slovakia&#8217;s rating of 1654; they are lucky to be in the tournament.</p>
<p>The likelihood that a team will win its match can be computed from the elo rankings of the team and its opponent according to the formula <img src="http://s0.wp.com/latex.php?latex=%5Cfrac%7B1%7D%7B1+%2B+10%5E%7B%28elo_%7Bthem%7D+-+elo_%7Bus%7D%29%2F400%7D%7D&amp;bg=ffffff&amp;fg=555555&amp;s=0" alt="\frac{1}{1 + 10^{(elo_{them} - elo_{us})/400}}" title="\frac{1}{1 + 10^{(elo_{them} - elo_{us})/400}}" class="latex" />.  Thus, the United States had a 60.5% expectation of winning its match against Ghana this afternoon, and Ghana had a 39.5% expectation of defeating the United States.  Harrumph!</p>
<p>Every time a match is played, the elo rating of a team changes.  The amount of the change is based on the actual result as compared to the expected result.  If a team wins when they have a high expectation of winning, their elo rating goes up by a small amount, since they were expected to win.  However, if a team wins when they have a low expectation of winning, their elo rating goes up by a large amount.  The formula is <img src="http://s0.wp.com/latex.php?latex=elo_%7Bnew%7D+%3D+elo_%7Bold%7D+%2B+KG%28W-W_e%29&amp;bg=ffffff&amp;fg=555555&amp;s=0" alt="elo_{new} = elo_{old} + KG(W-W_e)" title="elo_{new} = elo_{old} + KG(W-W_e)" class="latex" />, where <em>K</em> is a weighting for the importance of the game (<em>K</em> is 60 for the World Cup), <em>G</em> is a parameter based on the goal differential (we&#8217;ll assume that all games are won by a single goal, so <em>G</em> = 1), <em>W</em> is 1 for a win and 0 for a loss, and <em>W</em><sub><em>e</em></sub> is the winning expectation calculated by the formula given above.</p>
<p>Your task is to use the data and formulas described above to simulate the knockout stage of the World Cup a million times and report the number of times each nation wins.  When you are finished, you are welcome to <a href="/2010/06/29/world-cup-prognostication/2/">read</a> or <a href="http://programmingpraxis.codepad.org/RjEZcaLh">run</a> a suggested solution, or to post your own solution or discuss the exercise in the comments below.</p>
</div>
</body>
</html>
