<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
<title>Thank God It&#8217;s Friday! &laquo;  Programming Praxis</title>
</head>
<body>
<div class="entrytitle">
<h2>Thank God It&#8217;s&nbsp;Friday!</h2>
<h3>June 24, 2011</h3>
</div>
<div class="entrybody">
<p>We have previously given two algorithms to calculate the day of the week, one in the <a href="standard-prelude/#date-arithmetic">Standard Prelude</a> and one in the exercise on <a href="http://programmingpraxis.com/2010/10/08/zellers-congruence/">Zeller&#8217;s Congruence</a>.  In today&#8217;s exercise we give three more algorithms to calculate the day of the week.</p>
<p>Our <a href="http://en.wikipedia.org/wiki/Calculating_the_day_of_the_week#Gaussian_algorithm">first method</a> is due to Carl Gauss, and is based on moving January and February to the end of the preceding year, then fitting a straight line through the number of days in each month.  Gauss gives the formula <img src="http://s0.wp.com/latex.php?latex=w+%3D+%5Cleft%28+d+%2B+%5Clfloor+2.6+m+-+0.2+%5Crfloor+%2B+y+%2B+%5Clfloor+%5Cfrac%7By%7D%7B4%7D+%5Crfloor+%2B+%5Clfloor+%5Cfrac%7Bc%7D%7B4%7D+%5Crfloor+-+2c+%5Cright%29+%5Cpmod%7B7%7D&amp;bg=ffffff&amp;fg=555555&amp;s=0" alt="w = \left( d + \lfloor 2.6 m - 0.2 \rfloor + y + \lfloor \frac{y}{4} \rfloor + \lfloor \frac{c}{4} \rfloor - 2c \right) \pmod{7}" title="w = \left( d + \lfloor 2.6 m - 0.2 \rfloor + y + \lfloor \frac{y}{4} \rfloor + \lfloor \frac{c}{4} \rfloor - 2c \right) \pmod{7}" class="latex" /> where <em>Y</em> is the input year, except that it is reduced by 1 in January and February, <em>d</em> is the day of the month, <em>m</em> is the number of the month, with 1 for March through 12 for February, <em>y</em> is the last two digits of <em>Y</em>, <em>c</em> is the first two digits of <em>Y</em>, and <em>w</em> is the day of the week, with 0 for Sunday through 6 for Saturday.  For instance, June 24, 2011 is calculated as 24 + floor(2.6&times;4&minus;0.2) + 11 + floor(11&divide;4) + floor(20&divide;4) &#8211; 2&times;20, modulo 7, which is 5 for Friday.</p>
<p>Our <a href="http://en.wikipedia.org/wiki/Calculating_the_day_of_the_week#Sakamoto.27s_algorithm">second method</a> is due to Tomohiko Sakamoto, who gives a table of offsets for the days of each month from the day at the start of the year: <em>t</em> = {0, 3, 2, 5, 0, 3, 5, 1, 4, 6, 2, 4}.  Then Sakamoto subtracts 1 from the input year in January and February and calculates the day of the week with the formula <img src="http://s0.wp.com/latex.php?latex=%5Cleft%28+y+%2B+%5Clfloor+%5Cfrac%7By%7D%7B4%7D+%5Crfloor+-+%5Clfloor+%5Cfrac%7By%7D%7B100%7D+%5Crfloor+%2B+%5Clfloor+%5Cfrac%7By%7D%7B400%7D+%5Crfloor+%2B+t%5Bm-1%5D+%2B+d+%5Cright%29+%5Cpmod%7B7%7D&amp;bg=ffffff&amp;fg=555555&amp;s=0" alt="\left( y + \lfloor \frac{y}{4} \rfloor - \lfloor \frac{y}{100} \rfloor + \lfloor \frac{y}{400} \rfloor + t[m-1] + d \right) \pmod{7}" title="\left( y + \lfloor \frac{y}{4} \rfloor - \lfloor \frac{y}{100} \rfloor + \lfloor \frac{y}{400} \rfloor + t[m-1] + d \right) \pmod{7}" class="latex" />.  For instance, June 24, 2011 is calculated as 2011 + floor(2011&divide;4) &minus; floor(2011&divide;100) + floor(2011&divide;400) + t[6&minus;1] + 24 = 2011 + 502 &#8211; 20 + 5 + 3 + 24 = 2525, modulo 7, which is 5 for Friday.</p>
<p>Our <a href="http://en.wikipedia.org/wiki/Doomsday_rule">third method</a> is due to John Horton Conway, and is intended for mental calculation.  Conway&#8217;s method is based on calculating the <em>anchor day</em> for the requested century, the <em>doomsday</em> for the requested year, and interpolating from various repetitions of the doomsday through the year.</p>
<p>The anchor day is calculated as <img src="http://s0.wp.com/latex.php?latex=%5Cleft%28+5c+%2B+%5Clfloor+%5Cfrac%7Bc-1%7D%7B4%7D+%5Crfloor+%5Cright%29+%5Cpmod%7B7%7D+%2B+Thursday&amp;bg=ffffff&amp;fg=555555&amp;s=0" alt="\left( 5c + \lfloor \frac{c-1}{4} \rfloor \right) \pmod{7} + Thursday" title="\left( 5c + \lfloor \frac{c-1}{4} \rfloor \right) \pmod{7} + Thursday" class="latex" />, where <em>c</em> is the century; note that century years, such as 2000, are part of the succeeding century, so <em>c</em>=21 for the year 2000.  For example, the anchor day for the 21<sup>st</sup> century is Tuesday, calculated as 5&times;21 + floor(20&divide;4), modulo 7, plus Thursday.  Anchor days repeat every four centuries, in the cycle Friday, Wednesday, Tuesday, Sunday starting from the year 1800.</p>
<p>The doomsday is calculated by dividing the last two digits of the year by 12 to calculate the quotient and remainder.  Then the doomsday is the quotient, plus the remainder, plus the quotient of the remainder divided by 4, plus the anchor day for the century.  For example, the doomsday for 2011 is Monday, calculated as 0 + 11 + floor(11&divide;4) = 13, which is 6 modulo 7, plus the anchor day Tuesday.</p>
<p>Once the doomsday is known, the day of the week is calculated by locating the nearest doomsday in each month, which can be memorized in the following manner:  For April, June, August, October, and December, the doomsday is the month number: 4/4, 6/6, 8/8, 10/10, and 12/12.  For May, July, September, and November, the doomsday can be calculated by the ditty &#8220;I worked 9 to 5 at 7-11&#8243; which gives 5/9, 7/11, 9/5, and 11/7.  The last day of February is a doomsday, whether a common year or a leap year, and this gives an easy way to calculate the day of the week for March, where doomsday is 3/0 (the &#8220;zeroth&#8221; day of March).  All that&#8217;s left is January, for which the doomsday is 1/10 in common years and 1/11 in leap years.</p>
<p>Thus, the day of the week for June 24, 2011 is calculated as 24&minus;6=18 &equiv; 4 (mod 7) days past the doomsday, which gives an answer of Friday.  Conway claims to be able to calculate any day of the week in two seconds, though I confess I have not been able to make the required calculations reliably except by using pencil and paper to assist.</p>
<p>Your task is to write programs to calculate the day of the week using the three functions described above; for Conway&#8217;s algorithm, you should calculated the doomsday for the year rather than the day of the week for the date.  When you are finished, you are welcome to <a href="/2011/06/24/thank-god-its-friday/2/">read</a> or <a href="http://programmingpraxis.codepad.org/BeTpy03N">run</a> a suggested solution, or to post your own solution or discuss the exercise in the comments below.</p>
</div>
</body>
</html>
