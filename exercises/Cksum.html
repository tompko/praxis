<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
<title>Cksum &laquo;  Programming Praxis</title>
</head>
<body>
<div class="entrytitle">
<h2>Cksum</h2>
<h3>October 25, 2011</h3>
</div>
<div class="entrybody">
<p>We did versions of the <code>sum</code> command for computing file checksums in two <a href="/2011/03/25/sum/">previous</a> <a href="/2011/10/21/sum-revisited/">exercises</a>, one for System V and one for Berkeley systems. Although the BSD version of the command fixes many of the problems of the SysV version, having two different versions of the <code>sum</code> command is inconvenient, and the solution has been to create a third (incompatible) checksum program with a new name: <code>cksum</code>. The algorithm used in <code>cksum</code> is given by the <a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/cksum.html">Open Group</a>:</p>
<blockquote><p>The <em>cksum</em> utility shall calculate and write to standard output a cyclic redundancy check (CRC) for each input file, and also write to standard output the number of octets in each file. The CRC used is based on the polynomial used for CRC error checking in the ISO/IEC 8802-3:1996 standard (Ethernet).</p>
<p>The encoding for the CRC checksum is defined by the generating polynomial:</p>
<blockquote><p><em>G</em>(<em>x</em>)=<em>x</em><sup>32</sup>+<em>x</em><sup>26</sup>+<em>x</em><sup>23</sup>+<em>x</em><sup>22</sup>+<em>x</em><sup>16</sup>+<em>x</em><sup>12</sup>+<em>x</em><sup>11</sup>+<em>x</em><sup>10</sup>+<em>x</em><sup>8</sup>+<em>x</em><sup>7</sup>+<em>x</em><sup>5</sup>+<em>x</em><sup>4</sup>+<em>x</em><sup>2</sup>+<em>x</em>+1</p></blockquote>
<p>Mathematically, the CRC value corresponding to a given file shall be defined by the following procedure:</p>
<ol>
<li>The <em>n</em> bits to be evaluated are considered to be the coefficients of a mod 2 polynomial <em>M</em>(<em>x</em>) of degree <em>n</em>&minus;1. These <em>n</em> bits are the bits from the file, with the most significant bit being the most significant bit of the first octet of the file and the last bit being the least significant bit of the last octet, padded with zero bits (if necessary) to achieve an integral number of octets, followed by one or more octets representing the length of the file as a binary value, least significant octet first. The smallest number of octets capable of representing this integer shall be used.</li>
<li><em>M</em>(<em>x</em>) is multiplied by <em>x</em><sup>32</sup> (that is, shifted left 32 bits) and divided by <em>G</em>(<em>x</em>) using mod 2 division, producing a remainder <em>R</em>(<em>x</em>) of degree &le; 31.</li>
<li>The coefficients of <em>R</em>(<em>x</em>) are considered to be a 32-bit sequence.</li>
<li>The bit sequence is complemented and the result is the CRC.</li>
</ol>
</blockquote>
<p>The reference implementation from the Open Group is shown on the <a href="/2011/10/25/cksum/2/">next page</a>.</p>
<p>Your task is to implement the <code>cksum</code> algorithm. When you are finished, you are welcome to <a href="/2011/10/25/cksum/3/">read</a> or <a href="http://programmingpraxis.codepad.org/6FlmcgGC">run</a> a suggested solution, or to post your own solution or discuss the exercise in the comments below.</p>
<div id="wpcom_below_post" class="wpadvert" style="text-align: center; padding: 5px; background: #; padding: 5px; margin: 10px auto; width: 310px;">
<!-- <span style="text-align: left; letter-spacing: 1px; font: 8px/1em Verdana, sans-serif; color: #ccc; text-transform: uppercase; display: block; padding: 0 1px;">Advertisement</span> -->
<script type="text/javascript">
LD_AddCustomAttr("AdOpt", "1");
LD_AddCustomAttr("Origin", "other");
LD_AddCustomAttr("theme_bg", "ffffff"); 
LD_AddCustomAttr("theme_text", "555555"); 
LD_AddCustomAttr("theme_link", "557799"); 
LD_AddCustomAttr("theme_border", "C8A799"); 
LD_AddCustomAttr("theme_url", "8FB1D3"); 
LD_AddCustomAttr("LangId", "1");
LD_AddCustomAttr("Autotag", "technology");
LD_AddCustomAttr("Tag", "exercises");

LD_AddSlot("wpcom_below_post");
LD_GetBids();
</script>
</div><div class="sharedaddy sd-like-enabled"><div id="wpl-likebox" class="sd-block sd-like"><h3 class="sd-title">Like this:</h3><div class="sd-content"><div id="wpl-button"><a href="http://programmingpraxis.com/2011/10/25/cksum/?like=1&amp;_wpnonce=a72c2c6ab5" title="I like this post" class="like needs-login sd-button" rel="nofollow"><span>Like</span></a></div><div id="wpl-count" class="sd-like-count">Be the first to like this post.</div></div></div></div> <p>Pages: 1 <a href="http://programmingpraxis.com/2011/10/25/cksum/2/">2</a> <a href="http://programmingpraxis.com/2011/10/25/cksum/3/">3</a></p> </div></div>
</body>
</html>
