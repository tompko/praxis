<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
<title>Sum, Revisited &laquo;  Programming Praxis</title>
</head>
<body>
<div class="entrytitle">
<h2>Sum,&nbsp;Revisited</h2>
<h3>October 21, 2011</h3>
</div>
<div class="entrybody">
<p>We looked at the Unix SysV <code>sum</code> command in a <a href="/2011/03/25/sum/">previous exercise</a>. At the time, my intention was to do the BSD version of the <code>sum</code> command immediately, in the next exercise, but for some reason I failed to do so. That oversight is corrected in today&#8217;s exercise.</p>
<p>The original SysV <code>sum</code> command simply calculated the sum of all the bytes in the file, modulo 2<sup>16</sup>. Thus, it failed to distinguish two files in which the order of the bytes was changed, null bytes were added, or the bytes were manipulated so that additions to one byte were subtracted from another byte. Although the BSD algorithm isn&#8217;t perfect, it identifies all those differences by summing 2-byte words, rotating the accumulating sum one bit to the right after each step.</p>
<p>Today&#8217;s exercise is to implement the standard Unix <code>sum</code> command that calculates either of these checksums:</p>
<blockquote><p><code>NAME</code></p>
<blockquote><p>sum -- checksum and count the blocks in a file</p></blockquote>
<p>SYNOPSIS</p>
<blockquote><p>sum [-r | -s] [file ...]</p></blockquote>
<p>DESCRIPTION</p>
<blockquote><p>Print checksum and block counts for each file. The BSD algorithm is used unless the System V algorithm is specified.</p>
<p>-r -- Use BSD sum algorithm with 1024-bit blocks.</p>
<p>-s -- Use System V sum algorithm with 512-bit blocks.</p>
<p>When file is - or is not given, read standard input.</p></blockquote>
<p></p></blockquote>
<p>Your task is to write the Unix V7 <code>sum</code> command as specified above. When you are finished, you are welcome to <a href="/2011/10/21/sum-revisited/2/">read</a> or <a href="http://programmingpraxis.codepad.org/KwePb916">run</a> a suggested solution, or to post your own solution or discuss the exercise in the comments below.</p>
<div id="wpcom_below_post" class="wpadvert" style="text-align: center; padding: 5px; background: #; padding: 5px; margin: 10px auto; width: 310px;">
<!-- <span style="text-align: left; letter-spacing: 1px; font: 8px/1em Verdana, sans-serif; color: #ccc; text-transform: uppercase; display: block; padding: 0 1px;">Advertisement</span> -->
<script type="text/javascript">
LD_AddCustomAttr("AdOpt", "1");
LD_AddCustomAttr("Origin", "other");
LD_AddCustomAttr("theme_bg", "ffffff"); 
LD_AddCustomAttr("theme_text", "555555"); 
LD_AddCustomAttr("theme_link", "557799"); 
LD_AddCustomAttr("theme_border", "C8A799"); 
LD_AddCustomAttr("theme_url", "8FB1D3"); 
LD_AddCustomAttr("LangId", "1");
LD_AddCustomAttr("Autotag", "technology");
LD_AddCustomAttr("Autotag", "science");
LD_AddCustomAttr("Autotag", "business");
LD_AddCustomAttr("Tag", "exercises");

LD_AddSlot("wpcom_below_post");
LD_GetBids();
</script>
</div><div class="sharedaddy sd-like-enabled"><div id="wpl-likebox" class="sd-block sd-like"><h3 class="sd-title">Like this:</h3><div class="sd-content"><div id="wpl-button"><a href="http://programmingpraxis.com/2011/10/21/sum-revisited/?like=1&amp;_wpnonce=a72c2c6ab5" title="I like this post" class="like needs-login sd-button" rel="nofollow"><span>Like</span></a></div><div id="wpl-count" class="sd-like-count">Be the first to like this post.</div></div></div></div> <p>Pages: 1 <a href="http://programmingpraxis.com/2011/10/21/sum-revisited/2/">2</a></p> </div></div>
</body>
</html>
