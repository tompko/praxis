<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
<title>Literate Programming &laquo;  Programming Praxis</title>
</head>
<body>
<div class="entrytitle">
<h2>Literate&nbsp;Programming</h2>
<h3>August 10, 2010</h3>
</div>
<div class="entrybody">
<p><a href="http://www.literateprogramming.com/knuthweb.pdf">Literate programming</a> is a style of programming invented by Donald Knuth that merges documentation and code in a single document, with code presented in an order that is conducive to the reader.  Chunks of code can be written in any order; a program called <code>tangle</code> restructures the chunks into the order required by the compiler.  Here is a short but complete example of a literate program, which you may recognize as the <em>second</em> program, after &#8220;hello world,&#8221; from K&amp;R:</p>
<blockquote><p><code>This program prints a fahrenheit/celsius conversion table.</code></p>
<p>&lt;&lt;*&gt;&gt;=<br />
&lt;&lt; include standard headers &gt;&gt;<br />
&lt;&lt; the main program &gt;&gt;</p>
<p>The only standard header required is stdio.h, which includes the printf function used by the program.</p>
<p>&lt;&lt; include standard headers &gt;&gt;=<br />
#include &lt;stdio.h&gt;</p>
<p>The main program defines some variables, initializes them, then loops through the table printing output lines.</p>
<p>&lt;&lt; the main program &gt;&gt;=<br />
main()<br />
{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt; declare variables &gt;&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt; initialize variables &gt;&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt; loop through the table &gt;&gt;<br />
}</p>
<p>Variables fahr and celsius hold the current temperatures.  Variables lower, upper and step control the loop.</p>
<p>&lt;&lt; declare variables &gt;&gt;=<br />
int fahr, celsius;<br />
int lower, upper, step;</p>
<p>The loop control variables are initialized so that the table prints fahrenheit values from 0 to 300 in steps of 20, along with the corresponding celsius values.</p>
<p>&lt;&lt; initialize variables &gt;&gt;=<br />
lower = 0;<br />
upper = 300;<br />
step = 20;</p>
<p>Temperatures are printed by a loop.</p>
<p>&lt;&lt; loop through the table &gt;&gt;=<br />
fahr = lower;<br />
while (fahr &lt;= upper) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt; calculate celsius and print one line &gt;&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;fahr = fahr + step;<br />
}</p>
<p>The celsius equivalent of a fahrenheit temperature is computed by the traditional formula C = 9/5 * (F-32).  The two temperatures are printed separated by a tab character, each pair on a single line.</p>
<p>&lt;&lt; calculate celsius and print one line &gt;&gt;=<br />
celsius = 5 * (fahr-32) / 9;<br />
printf("%d\t%d\n", fahr, celsius);</p></blockquote>
<p>This is a simple-minded literate programming system, and the form of the input file is correspondingly simple.  Code chunks are introduced by a line beginning with double less-than signs and ending with double greater-than signs and an equals sign; there may be no white space at the beginning or end of the line.  Code chunks are referenced on any line within another code chunk by surrounding the name of the chunk, which must exactly match the name given on the definition line, with double less-than and greater-than signs; there may be only one reference per line.  A code chunk ends at the first blank line following its beginning, or at the end of the file, whichever comes sooner.</p>
<p>The <code>tangle</code> program collects all the code chunks, then performs depth-first search through the call-tree graph beginning with the top-level &#8220;*&#8221; chunk.  <code>Tangle</code> is careful to preserve the formatting of the original, in case the programmer needs to look at its output.  <code>Tangle</code> produces the following output from the example program shown above:</p>
<blockquote><p><code>#include<br />
main()<br />
{<br />
&nbsp;&nbsp;&nbsp;&nbsp;int fahr, celsius;<br />
&nbsp;&nbsp;&nbsp;&nbsp;int lower, upper, step;<br />
&nbsp;&nbsp;&nbsp;&nbsp;lower = 0;<br />
&nbsp;&nbsp;&nbsp;&nbsp;upper = 300;<br />
&nbsp;&nbsp;&nbsp;&nbsp;step = 20;<br />
&nbsp;&nbsp;&nbsp;&nbsp;fahr = lower;<br />
&nbsp;&nbsp;&nbsp;&nbsp;while (fahr &lt;= upper) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;celsius = 5 * (fahr-32) / 9;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(&quot;%d\t%d\n&quot;, fahr, celsius);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fahr = fahr + step;<br />
&nbsp;&nbsp;&nbsp;&nbsp;}<br />
}</code></p></blockquote>
<p>This program is simple-minded for exposition, and doesn&#8217;t do justice to the literate programming concept.  You&#8217;ll see a better example in the solution.</p>
<p>Your task is to write a program that tangles an input file and creates a program output.  When you are finished, you are welcome to <a href="/2010/08/10/literate-programming/2/">read</a> or <a href="http://programmingpraxis.codepad.org/WneWNXBF">run</a> a suggested solution, or to post your own solution or discuss the exercise in the comments below.</p>
<div id="wpcom_below_post" class="wpadvert" style="text-align: center; padding: 5px; background: #; padding: 5px; margin: 10px auto; width: 310px;">
<!-- <span style="text-align: left; letter-spacing: 1px; font: 8px/1em Verdana, sans-serif; color: #ccc; text-transform: uppercase; display: block; padding: 0 1px;">Advertisement</span> -->
<script type="text/javascript">
LD_AddCustomAttr("AdOpt", "1");
LD_AddCustomAttr("Origin", "other");
LD_AddCustomAttr("theme_bg", "ffffff"); 
LD_AddCustomAttr("theme_text", "555555"); 
LD_AddCustomAttr("theme_link", "557799"); 
LD_AddCustomAttr("theme_border", "C8A799"); 
LD_AddCustomAttr("theme_url", "8FB1D3"); 
LD_AddCustomAttr("LangId", "1");
LD_AddCustomAttr("Autotag", "technology");
LD_AddCustomAttr("Autotag", "science");
LD_AddCustomAttr("Autotag", "education");
LD_AddCustomAttr("Tag", "exercises");

LD_AddSlot("wpcom_below_post");
LD_GetBids();
</script>
</div><div class="sharedaddy sd-like-enabled"><div id="wpl-likebox" class="sd-block sd-like"><h3 class="sd-title">Like this:</h3><div class="sd-content"><div id="wpl-button"><a href="http://programmingpraxis.com/2010/08/10/literate-programming/?like=1&amp;_wpnonce=a72c2c6ab5" title="I like this post" class="like needs-login sd-button" rel="nofollow"><span>Like</span></a></div><div id="wpl-count" class="sd-like-count">Be the first to like this post.</div></div></div></div> <p>Pages: 1 <a href="http://programmingpraxis.com/2010/08/10/literate-programming/2/">2</a></p> </div></div>
</body>
</html>
